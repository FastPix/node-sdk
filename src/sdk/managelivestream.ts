/*
* This file is auto-generated.
 * Do not edit this file manually.
 * Your changes will be overwritten during the next generation.
 */

import { manageLiveStreamComplete } from "../funcs/manageLiveStreamComplete.js";
import { manageLiveStreamDisable } from "../funcs/manageLiveStreamDisable.js";
import { manageLiveStreamGet } from "../funcs/manageLiveStreamGet.js";
import { manageLiveStreamGetViewerCount } from "../funcs/manageLiveStreamGetViewerCount.js";
import { manageLiveStreamUpdate } from "../funcs/manageLiveStreamUpdate.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class ManageLiveStream extends ClientSDK {
  /**
   * Get stream views by ID
   *
   * @remarks
   * This endpoint retrieves the current number of viewers watching a specific live stream, identified by its unique `streamId`.
   *
   * The viewer count is an **approximate value**, optimized for performance. It provides a near-real-time estimate of how many clients are actively watching the stream. This approach ensures high efficiency, especially when the stream is being watched at large scale across multiple devices or platforms.
   *
   * #### Example
   *
   * Suppose a content creator is hosting a live concert and wants to display the number of live viewers on their dashboard. This endpoint can be queried to show up-to-date viewer statistics.
   *
   * Related guide: <a href="https://docs.fastpix.io/docs/manage-streams">Manage streams</a>
   */
  async getViewerCount(
    request: operations.GetLiveStreamViewerCountByIdRequest,
    options?: RequestOptions,
  ): Promise<operations.GetLiveStreamViewerCountByIdResponse> {
    return unwrapAsync(manageLiveStreamGetViewerCount(
      this,
      request,
      options,
    ));
  }

  /**
   * Get stream by ID
   *
   * @remarks
   * This endpoint retrieves details about a specific live stream by its unique `streamId`. It includes data such as the stream’s `status` (idle, preparing, active, disabled), `metadata` (title, description), and more.
   * #### Example
   *
   *   Suppose a news agency is broadcasting a live event and wants to track the configurations set for the live stream while also checking the stream's status.
   *
   * Related guide: <a href="https://docs.fastpix.io/docs/manage-streams">Manage streams</a>
   */
  async get(
    request: operations.GetLiveStreamByIdRequest,
    options?: RequestOptions,
  ): Promise<operations.GetLiveStreamByIdResponse> {
    return unwrapAsync(manageLiveStreamGet(
      this,
      request,
      options,
    ));
  }

  /**
   * Update a stream
   *
   * @remarks
   * This endpoint allows you to modify the parameters of an existing live stream, such as its `metadata` (title, description) or the `reconnectWindow`. It’s useful for making changes to a stream that has already been created but not yet ended. After the live stream is disabled, you cannot update a stream.
   *
   *   The updated stream parameters and the `streamId` needs to be shared in the request, and FastPix returns the updated stream details. After the update, <a href="https://docs.fastpix.io/docs/live-events#videolive_streamupdated">video.live_stream.updated</a> webhook event notifies your system.
   *
   *  #### Example
   *
   *  A host realizes they need to extend the reconnect window for their live stream in case they lose connection temporarily during the event. Or suppose during a multi-day online conference, the event organizers need to update the stream title to reflect the next day"s session while keeping the same stream ID for continuity.
   *
   *   Related guide: <a href="https://docs.fastpix.io/docs/manage-streams">Manage streams</a>
   */
  async update(
    request: operations.UpdateLiveStreamRequest,
    options?: RequestOptions,
  ): Promise<operations.UpdateLiveStreamResponse> {
    return unwrapAsync(manageLiveStreamUpdate(
      this,
      request,
      options,
    ));
  }

  /**
   * Disable a stream
   *
   * @remarks
   * This endpoint disables a livestream by setting its status to `disabled`. Use this to stop a livestream when it's no longer needed or must be taken offline intentionally.
   *
   * A disabled stream can later be re-enabled using the enable endpoint — however, if you're on a trial plan, re-enabling is not allowed once the stream is disabled.
   *
   * #### Example
   *
   * A speaker finishes their live session and wants to prevent the stream from being mistakenly started again. By calling this endpoint, the stream is transitioned to a `disabled` state, ensuring it's permanently stopped (unless re-enabled on a paid plan).
   *
   * Related guide <a href="https://docs.fastpix.io/docs/manage-streams">Manage streams</a>
   */
  async disable(
    request: operations.DisableLiveStreamRequest,
    options?: RequestOptions,
  ): Promise<operations.DisableLiveStreamResponse> {
    return unwrapAsync(manageLiveStreamDisable(
      this,
      request,
      options,
    ));
  }

  /**
   * Complete a stream
   *
   * @remarks
   * This endpoint marks a livestream as completed by stopping the active stream and transitioning its status to `idle`. It is typically used after a livestream session has ended.
   *
   * This operation only works when the stream is in the `active` state.
   *
   * Completing a stream can help finalize the session and trigger post-processing events like VOD generation.
   *
   * #### Example
   *
   * A virtual event ends, and the system or host needs to close the livestream to prevent further streaming. This endpoint ensures the livestream status is changed from `active` to `idle`, indicating it's officially completed.
   *
   * Related guide <a href="https://docs.fastpix.io/docs/manage-streams">Manage streams</a>
   */
  async complete(
    request: operations.CompleteLiveStreamRequest,
    options?: RequestOptions,
  ): Promise<operations.CompleteLiveStreamResponse> {
    return unwrapAsync(manageLiveStreamComplete(
      this,
      request,
      options,
    ));
  }
}
