/*
* This file is auto-generated.
 * Do not edit this file manually.
 * Your changes will be overwritten during the next generation.
 */

import { mediaDeleteTrack } from "../funcs/mediaDeleteTrack.js";
import { mediaGetClips } from "../funcs/mediaGetClips.js";
import { mediaList } from "../funcs/mediaList.js";
import { mediaUpdateSourceAccess } from "../funcs/mediaUpdateSourceAccess.js";
import { ClientSDK, RequestOptions } from "../lib/sdks.js";
import * as operations from "../models/operations/index.js";
import { unwrapAsync } from "../types/fp.js";

export class Media extends ClientSDK {
  /**
   * Get list of all media
   *
   * @remarks
   * This endpoint returns a list of all media files uploaded to FastPix within a specific workspace. Each media entry contains data such as the media `id`, `createdAt`, `status`, `type` and more. It allows you to retrieve an overview of your media assets, making it easier to manage and review them.
   *
   * #### How it works
   *
   * Use the access token and secret key related to the workspace in the request header. When called, the API provides a paginated response containing all the media items in that specific workspace. This is helpful for retrieving a large volume of media and managing content in bulk.
   *
   * #### Example
   * If you manage a video platform and need to review all uploaded media in your library to ensure that outdated or low-quality content isn’t being served, you can use this endpoint to retrieve a complete list of media. You can then filter, sort, or update items as needed.
   */
  async list(
    request?: operations.ListMediaRequest | undefined,
    options?: RequestOptions,
  ): Promise<operations.ListMediaResponse> {
    return unwrapAsync(mediaList(
      this,
      request,
      options,
    ));
  }

  /**
   * Delete audio / subtitle track
   *
   * @remarks
   * This endpoint allows you to delete an existing audio or subtitle track from a media file. Once deleted, the track must no longer be available for playback.
   *
   * #### How it works
   *
   * 1. Send a DELETE request to this endpoint, replacing `{mediaId}` with the media ID, and `{trackId}` with the ID of the track you want to remove.
   *
   * 2. The track gets deleted from the media file, and you must receive a confirmation response.
   *
   * #### Webhook events
   *
   * 1. After successfully deleting a track, your system must receive the webhook event **video.media.track.deleted**.
   *
   * 2. Once the media file is updated to reflect the track removal, a <a href="https://docs.fastpix.io/docs/media-events#videomediaupdated">video.media.updated</a> event must be triggered.
   *
   * #### Example
   * Suppose you uploaded an audio track in Italian for a video but later realize it's incorrect or no longer needed. By calling this API, you can remove the specific track while keeping the rest of the media file unchanged. This is useful when:
   *
   *   - A track was mistakenly added and needs to be removed.
   *   - The content owner requests the removal of a specific subtitle or audio track.
   *   - A new version of the track gets uploaded to replace the existing one.
   *
   * Related guides: <a href="https://docs.fastpix.io/docs/manage-subtitle-tracks">Add own subtitle tracks</a>, <a href="https://docs.fastpix.io/docs/manage-audio-tracks">Add own audio tracks</a>
   */
  async deleteTrack(
    request: operations.DeleteMediaTrackRequest,
    options?: RequestOptions,
  ): Promise<operations.DeleteMediaTrackResponse> {
    return unwrapAsync(mediaDeleteTrack(
      this,
      request,
      options,
    ));
  }

  /**
   * Update the source access of a media by ID
   *
   * @remarks
   * This endpoint allows you to update the `sourceAccess` setting of an existing media file. The `sourceAccess` parameter determines whether the original media file is accessible or restricted. Setting this to `true` enables access to the media source, while setting it to `false` restricts access.
   *
   * #### How it works
   *
   * 1. Make a `PATCH` request to this endpoint, replacing `{mediaId}` with the ID of the media you want to update.
   *
   * 2. Include the updated `sourceAccess` parameter in the request body.
   *
   * 3. You receive a response confirming the update to the media’s source access status.
   * 4. Webhook events: <a href="https://docs.fastpix.io/docs/transform-media-events#videomediasourceready">video.media.source.ready</a>, <a href="https://docs.fastpix.io/docs/transform-media-events#videomediasourcedeleted">video.media.source.deleted</a>
   */
  async updateSourceAccess(
    request: operations.UpdatedSourceAccessRequest,
    options?: RequestOptions,
  ): Promise<operations.UpdatedSourceAccessResponse> {
    return unwrapAsync(mediaUpdateSourceAccess(
      this,
      request,
      options,
    ));
  }

  /**
   * Get all clips of a media
   *
   * @remarks
   * This endpoint retrieves a list of all media clips associated with a given source media ID. It helps you organize and manage media efficiently by providing metadata such as clip media IDs and other relevant details.
   *
   * A media clip is a segmented portion of an original media file (source media). Clips are often created for various purposes such as previews, highlights, or customized edits. This API allows you to fetch all such clips linked to a specific source media, making it easier to track and manage clips.
   *
   * #### How it works
   *
   * - The endpoint returns metadata for all media clips associated with the given `mediaId`.
   * - Results are paginated to efficiently handle large datasets.
   * - Each entry includes detailed metadata such as media `id`, `duration`, and `status`.
   * - Helps in organizing clips effectively by providing structured information.
   *
   * #### Example
   *
   * Imagine you’re managing a video editing platform where users upload full-length videos and create short clips for social media sharing. To keep track of all clips linked to a particular video, you call this API with the sourceMediaId. The response provides a list of all associated clips, allowing you to manage, edit, or repurpose them as needed.
   *
   * Related guide: <a href="https://docs.fastpix.io/docs/create-clips-from-existing-media">Create clips from existing media</a>
   */
  async getClips(
    request: operations.GetMediaClipsRequest,
    options?: RequestOptions,
  ): Promise<operations.GetMediaClipsResponse> {
    return unwrapAsync(mediaGetClips(
      this,
      request,
      options,
    ));
  }
}
